% Professional CV Template for Quarto
\documentclass[11pt,letterpaper]{article}

% Packages
\usepackage[margin=0.75in]{geometry}
\usepackage{amsmath,amssymb}
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp}
\else
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi

% Professional font
\usepackage{lmodern}

% Better spacing
\usepackage{setspace}
\setstretch{1.05}

% Colors for links
\usepackage{xcolor}
\definecolor{linkcolor}{RGB}{0,102,204}

% Hyperlinks
\usepackage{hyperref}
\hypersetup{
$if(title-meta)$
  pdftitle={$title-meta$},
$endif$
$if(author-meta)$
  pdfauthor={$author-meta$},
$endif$
  colorlinks=true,
  linkcolor=linkcolor,
  filecolor=linkcolor,
  citecolor=linkcolor,
  urlcolor=linkcolor,
  pdfcreator={LaTeX via Quarto}}

\urlstyle{same}

% Better section formatting
\usepackage{titlesec}
\titleformat{\section}
  {\Large\bfseries}
  {}
  {0em}
  {}
  [\titlerule]
\titlespacing{\section}{0pt}{12pt plus 4pt minus 2pt}{6pt plus 2pt minus 2pt}

\titleformat{\subsection}
  {\Large\bfseries}
  {}
  {0em}
  {}
  [\titlerule]
\titlespacing{\subsection}{0pt}{12pt plus 4pt minus 2pt}{10pt plus 2pt minus 2pt}

\titleformat{\subsubsection}
  {\Large\bfseries}
  {}
  {0em}
  {}
\titlespacing{\subsubsection}{0pt}{10pt plus 3pt minus 2pt}{4pt plus 1pt minus 1pt}

% Graphics
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
\makeatletter
\def\fps@figure{htbp}
\makeatother

% Tables
\usepackage{longtable,booktabs,array}
\usepackage{calc}

% Lists
\usepackage{enumitem}
\setlist{nosep, leftmargin=*}

% Code/verbatim
\usepackage{fancyvrb}
\usepackage{upquote}

% Underline support
$if(strikeout)$
\usepackage[normalem]{ulem}
$endif$
\providecommand{\ul}[1]{\underline{#1}}

% Better paragraph handling
\setlength{\emergencystretch}{3em}
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}

% No section numbering
\setcounter{secnumdepth}{0}

% Page style
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\renewcommand{\headrulewidth}{0pt}
\fancyfoot[C]{\small\thepage}

$if(highlighting-macros)$
$highlighting-macros$
$endif$

$for(header-includes)$
$header-includes$
$endfor$

% Custom commands for CV formatting with dates on right
\newcommand{\cventry}[3]{%
  \noindent
  \begin{minipage}[t]{0.75\textwidth}
    #1
  \end{minipage}%
  \hfill
  \begin{minipage}[t]{0.23\textwidth}
    \raggedleft
    #2
  \end{minipage}
  
  \vspace{0.1em}
  
  \noindent #3
  
  \vspace{1em}
}

% Custom title formatting
\usepackage{etoolbox}

\makeatletter
% Remove default date
\date{}

% Custom title page
\renewcommand{\maketitle}{%
  \begin{center}
    % Name
    {\LARGE\bfseries $title$}
    
    \vspace{0.2em}
    
    % Subtitle/Position
    $if(subtitle)$
    {\large $subtitle$}
    $endif$
    
    \vspace{0.4em}
    
    % Contact info and affiliations
    $if(pdf-description)$
    {\normalsize
    $pdf-description$
    }
    $else$
    $if(description)$
    {\normalsize
    $description$
    }
    $endif$
    $endif$
  \end{center}
  \vspace{1em}
}
\makeatother

\begin{document}

% Title
$if(title)$
\maketitle
\thispagestyle{fancy}
$endif$

% Main content
$body$

\end{document}
